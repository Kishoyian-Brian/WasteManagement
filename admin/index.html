<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Dashboard ‚Äî Rictei Smart Waste</title>
  <link rel="stylesheet" href="../style.css">
</head>
<body>

  <nav class="nav nav-admin">
    <a href="../index.html" class="nav-brand">
      <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg>
      Rictei Smart City
    </a>
    <ul class="nav-links">
      <li><a href="../index.html">Home</a></li>
      <li><a href="../report.html">Report Waste</a></li>
      <li><a href="index.html" class="active">Admin</a></li>    </ul>
  </nav>

  <div class="admin-layout">
    <aside class="admin-sidebar">
      <h2 class="sidebar-title">Admin</h2>
      <nav class="sidebar-nav">
        <a href="#" class="sidebar-link active" data-panel="dashboard">
          <span class="sidebar-icon">üìä</span> Dashboard
        </a>
        <a href="#" class="sidebar-link" data-panel="pending">
          <span class="sidebar-icon">‚è≥</span> Pending Reports
        </a>
     
  
        <a href="#" class="sidebar-link" data-panel="heatmap">
          <span class="sidebar-icon">üó∫Ô∏è</span> Heat Map
        </a>
        <a href="#" class="sidebar-link" data-panel="all-reports">
          <span class="sidebar-icon">üìã</span> All Reports
        </a>
        <a href="#" class="sidebar-link" data-panel="collectors">
          <span class="sidebar-icon">üë∑</span> Collectors
        </a>
      </nav>
    </aside>

    <main class="admin-main">
      <!-- Dashboard panel -->
      <section id="panel-dashboard" class="admin-panel active">
        <h1 class="page-title">Dashboard</h1>
        <p class="page-subtitle">Overview of waste reports and system status.</p>
        <div class="stats-row">
          <div class="card stat-card">
            <h3>Total Reports</h3>
            <span class="card-value" id="stat-total">0</span>
            <p>All time</p>
          </div>
          <div class="card stat-card">
            <h3>Pending</h3>
            <span class="card-value" id="stat-pending">0</span>
            <p>Awaiting approval</p>
          </div>
          <div class="card stat-card">
            <h3>Approved</h3>
            <span class="card-value" id="stat-approved">0</span>
            <p>Sent to collectors</p>
          </div>
          <div class="card stat-card">
            <h3>Collected</h3>
            <span class="card-value" id="stat-collected">0</span>
            <p>Completed</p>
          </div>
        </div>
      </section>

      <!-- Pending Reports panel -->
      <section id="panel-pending" class="admin-panel">
        <h1 class="page-title">Pending Reports</h1>
        <p class="page-subtitle">Approve or reject reports before they go to collectors.</p>
        <div class="report-section">
          <div id="pending-list" class="report-list">
            <p class="empty-state" id="pending-empty">No pending reports. <a href="../report.html">Submit a report</a> to test the flow.</p>
          </div>
        </div>
      </section>

      <!-- Add New Drive panel -->
      <section id="panel-add-drive" class="admin-panel">
        <h1 class="page-title">Add New Drive</h1>
        <p class="page-subtitle">Schedule a new collection drive or route.</p>
        <div class="form-card" style="max-width: 520px;">
          <form id="add-drive-form">
            <div class="form-group">
              <label for="drive-name">Drive name</label>
              <input type="text" id="drive-name" placeholder="e.g. North Zone Weekly" required>
            </div>
            <div class="form-group">
              <label for="drive-zone">Zone / Area</label>
              <input type="text" id="drive-zone" placeholder="e.g. North District, Block A">
            </div>
            <div class="form-group">
              <label for="drive-schedule">Schedule</label>
              <select id="drive-schedule">
                <option value="weekly">Weekly</option>
                <option value="biweekly">Bi-weekly</option>
                <option value="daily">Daily</option>
                <option value="monthly">Monthly</option>
              </select>
            </div>
            <div class="form-group">
              <label for="drive-collector">Assigned collector</label>
              <select id="drive-collector">
                <option value="">‚Äî Select ‚Äî</option>
              </select>
            </div>
            <button type="submit" class="btn btn-primary btn-block">Create drive</button>
          </form>
          <p id="drive-message" class="form-message" style="display:none; margin-top:1rem;"></p>
        </div>
      </section>

      <!-- Smart Bins panel -->
      <section id="panel-bins" class="admin-panel">
        <h1 class="page-title">Smart Bin Status</h1>
        <p class="page-subtitle">Monitor fill levels across bins.</p>
        <div class="bin-status-section">
          <div class="bin-list">
            <div class="bin-item">
              <div class="bin-visual">
                <div class="bin-fill urgent" style="height: 90%;"></div>
              </div>
              <span class="bin-label">Bin #101</span>
              <span class="bin-badge urgent">Urgent</span>
            </div>
            <div class="bin-item">
              <div class="bin-visual">
                <div class="bin-fill warning" style="height: 65%;"></div>
              </div>
              <span class="bin-label">Bin #102</span>
              <span class="bin-badge warning">High</span>
            </div>
            <div class="bin-item">
              <div class="bin-visual">
                <div class="bin-fill ok" style="height: 30%;"></div>
              </div>
              <span class="bin-label">Bin #103</span>
              <span class="bin-badge ok">Normal</span>
            </div>
            <div class="bin-item">
              <div class="bin-visual">
                <div class="bin-fill ok" style="height: 15%;"></div>
              </div>
              <span class="bin-label">Bin #104</span>
              <span class="bin-badge ok">Normal</span>
            </div>
          </div>
        </div>
      </section>

      <!-- Heat Map panel -->
      <section id="panel-heatmap" class="admin-panel">
        <h1 class="page-title">Collection Heat Map</h1>
        <p class="page-subtitle">Where waste is collected most ‚Äî hotspots by location.</p>
        <div class="heatmap-card">
          <div class="heatmap-legend">
            <span>Low</span>
            <div class="heatmap-legend-bar"></div>
            <span>High</span>
          </div>
          <div id="heatmap-list" class="heatmap-list"></div>
          <p id="heatmap-empty" class="empty-state" style="display:none;">No collection data yet. Collections will appear here once reports are marked collected.</p>
        </div>
      </section>

      <!-- All Reports panel -->
      <section id="panel-all-reports" class="admin-panel">
        <h1 class="page-title">All Reports</h1>
        <p class="page-subtitle">Full list of waste reports (all statuses).</p>
        
        <!-- Statistics Summary -->
        <div class="stats-row" style="margin-bottom: 1.5rem;">
          <div class="card stat-card">
            <h3>Total</h3>
            <span class="card-value" id="all-reports-total">0</span>
            <p>All reports</p>
          </div>
          <div class="card stat-card">
            <h3>Pending</h3>
            <span class="card-value" id="all-reports-pending">0</span>
            <p>Awaiting approval</p>
          </div>
          <div class="card stat-card">
            <h3>Approved</h3>
            <span class="card-value" id="all-reports-approved">0</span>
            <p>Sent to collectors</p>
          </div>
          <div class="card stat-card">
            <h3>Collected</h3>
            <span class="card-value" id="all-reports-collected">0</span>
            <p>Completed</p>
          </div>
        </div>

        <!-- Filters and Search -->
        <div class="reports-filters" style="margin-bottom: 1.5rem;">
          <div class="filter-group">
            <label style="font-weight: 600; margin-right: 0.75rem; color: var(--text);">Filter by status:</label>
            <div class="status-filter-buttons">
              <button type="button" class="btn-filter active" data-filter="all">All</button>
              <button type="button" class="btn-filter" data-filter="pending">Pending</button>
              <button type="button" class="btn-filter" data-filter="approved">Approved</button>
              <button type="button" class="btn-filter" data-filter="collected">Collected</button>
            </div>
          </div>
          <div class="filter-group" style="margin-top: 1rem;">
            <input type="text" id="reports-search" class="search-input" placeholder="Search by ID, name, or location..." style="max-width: 400px;">
            <select id="reports-sort" class="sort-select" style="margin-left: 1rem;">
              <option value="newest">Sort: Newest first</option>
              <option value="oldest">Sort: Oldest first</option>
              <option value="status">Sort: By status</option>
            </select>
          </div>
        </div>

        <!-- Reports Table -->
        <div class="report-section">
          <div class="reports-table-wrap">
            <table id="reports-table" class="reports-table">
              <thead>
                <tr>
                  <th>Report ID</th>
                  <th>Reporter</th>
                  <th>Location</th>
                  <th>Type</th>
                  <th>Fill Level</th>
                  <th>Status</th>
                  <th>Created</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="all-reports-list"></tbody>
            </table>
            <p id="all-reports-empty" class="empty-state" style="display: none;">No reports found.</p>
          </div>
        </div>
      </section>

      <!-- Report Details Modal -->
      <div id="report-details-modal" class="modal is-hidden">
        <div class="modal-content">
          <div class="modal-header">
            <h2>Report Details</h2>
            <button type="button" class="modal-close" id="modal-close-btn">&times;</button>
          </div>
          <div class="modal-body" id="report-details-content"></div>
        </div>
      </div>

      <!-- Collectors panel -->
      <section id="panel-collectors" class="admin-panel">
        <h1 class="page-title">Collectors</h1>
        <p class="page-subtitle">Add and manage collector accounts.</p>
        <p style="margin-bottom: 1rem;">
          <button type="button" class="btn btn-primary" id="btn-show-add-collector">Add new collector</button>
        </p>
        <div id="add-collector-form-wrap" class="modal-backdrop is-hidden" aria-hidden="true">
          <div class="modal-dialog" role="dialog" aria-labelledby="add-collector-title">
            <button type="button" class="modal-close" id="btn-close-add-collector" aria-label="Close">&times;</button>
            <div class="form-card collectors-form">
              <h3 id="add-collector-title" style="margin: 0 0 1rem;">Add new collector</h3>
              <form id="add-collector-form">
                <div class="form-group">
                  <label for="collector-username">Username</label>
                  <input type="text" id="collector-username" placeholder="e.g. john_collector" required autocomplete="off">
                </div>
                <div class="form-group">
                  <label for="collector-password">Password</label>
                  <input type="password" id="collector-password" placeholder="Choose a password" required autocomplete="new-password">
                </div>
                <div class="form-group">
                  <label for="collector-password-confirm">Confirm password</label>
                  <input type="password" id="collector-password-confirm" placeholder="Repeat password" required autocomplete="new-password">
                </div>
                <p id="collector-message" class="form-message" style="display: none; margin-bottom: 1rem;"></p>
                <button type="submit" class="btn btn-primary btn-block">Add collector</button>
              </form>
            </div>
          </div>
        </div>
        <div class="report-section">
          <h3 style="margin: 0 0 1rem;">Registered collectors</h3>
          <div class="collectors-table-wrap">
            <table id="collectors-table" class="collectors-table">
              <thead>
                <tr>
                  <th>Username</th>
                  <th>Role</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="collectors-list"></tbody>
            </table>
            <p id="collectors-empty" class="empty-state" style="display: none;">No collectors registered. Click &quot;Add new collector&quot; to add one.</p>
          </div>
        </div>
      </section>
    </main>
  </div>

  <footer>
    <p>¬© 2026 Rictei Municipal Government ‚Äî Smart City Waste Management</p>
  </footer>

  <script src="../js/data.js"></script>
  <script src="admin.js"></script>
</body>
</html>
